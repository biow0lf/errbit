require:
  - rubocop-rails
  - rubocop-performance

inherit_from: .rubocop_todo.yml

AllCops:
  NewCops: enable
  Exclude:
    - 'bin/*'
    - 'vendor/**/*'
  SuggestExtensions: false

# Caveat: .find_by raises exception in mongoid, unlike ActiveRecord which
# returns nil
Rails/FindBy:
  Enabled: false

Layout/EmptyLineBetweenDefs:
  AllowAdjacentOneLineDefs: true

Layout/ExtraSpacing:
  AllowForAlignment: true

Layout/IndentationConsistency:
  # prescribes that in classes and modules the `protected` and `private`
  # modifier keywords shall be indented the same as public methods and that
  # protected and private members shall be indented one step more than the
  # modifiers.
  EnforcedStyle: indented_internal_methods

Style/GuardClause:
  MinBodyLength: 4

Layout/AccessModifierIndentation:
  EnforcedStyle: outdent

Layout/ParameterAlignment:
  EnforcedStyle: with_fixed_indentation

Layout/DotPosition:
  # Support code copy/paste into console
  EnforcedStyle: trailing

Layout/MultilineOperationIndentation:
  EnforcedStyle: indented

Layout/FirstHashElementIndentation:
  EnforcedStyle: consistent

Layout/HashAlignment:
  EnforcedHashRocketStyle: table
  EnforcedColonStyle: table

Layout/SpaceAroundOperators:
  AllowForAlignment: true

# long spec blocks are probably fine
Metrics/BlockLength:
  AllowedMethods: ['describe', 'context']

Lint/RefinementImportMethods:
  # A bug prevents this from running on config/initializers/notification_services.rb
  Enabled: false

Style/OpenStructUse:
  Enabled: false

Rails/ApplicationController:
  # We have some controllers that should not extend ApplicationController
  Enabled: false

Rails/WhereExists:
  # Not safe for mongoid
  Enabled: false

Naming/FileName:
  Exclude:
    - 'config/initializers/cve-*.rb'
